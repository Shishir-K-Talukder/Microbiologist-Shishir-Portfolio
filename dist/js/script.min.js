document.addEventListener("DOMContentLoaded",()=>{let o=document.querySelectorAll(".nav-item");window.addEventListener("scroll",()=>{let a=window.scrollY;document.querySelectorAll("section").forEach(e=>{var t=e.offsetTop,n=e.clientHeight;a>=t-200&&a<t+n-200&&(t=document.querySelector(`.nav-item[href="#${e.id}"]`))&&(o.forEach(e=>e.classList.remove("active")),t.classList.add("active"))})}),o.forEach(t=>{t.addEventListener("click",e=>{t.getAttribute("href").startsWith("#")&&(e.preventDefault(),e=t.getAttribute("href"),e=document.querySelector(e))&&e.scrollIntoView({behavior:"smooth"})})})});let e={threshold:.2,rootMargin:"0px 0px -50px 0px"},t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("fade-in"),t.unobserve(e.target))})},e),n=(document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".project-card, .testimonial-card").forEach(e=>t.observe(e))}),particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle"},opacity:{value:.5,random:!1,anim:{enable:!1}},size:{value:3,random:!0},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},push:{particles_nb:4}}},retina_detect:!0}),AOS.init({duration:1e3,once:!0,offset:100}),document.querySelectorAll(".counter")),o=200,r=e=>{var t=+e.innerText.replace(/[^\d]/g,""),n=+e.getAttribute("data-count")||0,a=t/o;n<t?(e.setAttribute("data-count",Math.ceil(n+a)),e.innerText=Math.ceil(n+a)+(e.innerText.includes("+")?"+":"%"),setTimeout(()=>r(e),1)):e.innerText=t+(e.innerText.includes("+")?"+":"%")},a=e=>{e.forEach(e=>{e.isIntersecting&&r(e.target)})},t=new IntersectionObserver(a,{threshold:.5});function i(){document.getElementById("popupOverlay").style.display="none",document.getElementById("thankYouPopup").style.display="none"}n.forEach(e=>t.observe(e)),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=document.querySelector(this.getAttribute("href"));e&&e.scrollIntoView({behavior:"smooth",block:"start"})})}),document.addEventListener("DOMContentLoaded",()=>{let i=document.getElementById("contact-form");i&&i.addEventListener("submit",async e=>{e.preventDefault();var e=i.querySelector('button[type="submit"]'),t=e.textContent,n=(e.textContent="Sending...",e.disabled=!0,{name:document.getElementById("name").value.trim(),email:document.getElementById("email").value.trim(),subject:document.getElementById("subject").value.trim(),message:document.getElementById("message").value.trim()});try{var a,o=await fetch("send_email.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await o.json();o.ok&&r.success?(document.getElementById("popupOverlay").style.display="block",document.getElementById("thankYouPopup").style.display="block",i.reset()):(a=r.error||"Failed to send message. Please try again later.",alert(a))}catch(e){alert("An error occurred while sending the message. Please try again later.")}finally{e.textContent=t,e.disabled=!1}})});